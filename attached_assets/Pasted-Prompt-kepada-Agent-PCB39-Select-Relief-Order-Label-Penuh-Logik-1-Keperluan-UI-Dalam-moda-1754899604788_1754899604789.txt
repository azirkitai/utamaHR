Prompt kepada Agent — PCB39 “Select Relief” (Order & Label Penuh) + Logik
1) Keperluan UI
Dalam modal PCB39 → tab Relief, komponen dropdown Select Relief mesti populate ikut order di bawah.

Item boleh ditambah ke senarai relief pekerja dengan butang Add PCB39 Relief.

Selepas tambah, paparkan sebagai list di bawah input (boleh padam dengan ikon ❌).

Nilai yang dimasukkan tidak menutup modal.

2) Sumber Data (WAJIB guna config ini)
Guna config JSON ini (boleh simpan sebagai pcb39_reliefs_2025.ts/json). UI wajib render ikut turutan array.

ts
Copy
Edit
export const PCB39_RELIEFS_2025 = [
  { code: "LP1",  label: "Medical treatment, special needs or carer expenses for parents", cap: 8000 },
  { code: "LP2",  label: "Basic supporting equipment", cap: 6000 },
  { code: "LP3A", label: "Higher education fees (Self) – A: Tertiary/Masters/Doctorate", cap: 7000 },
  { code: "LP3B", label: "Higher education fees (Self) – B: Skills/Professional (upskilling)", cap: 2000 },
  { code: "LP4A", label: "Medical expenses – A: Serious diseases (Self/Spouse/Child/Parent)", cap: 10000 },
  { code: "LP4B", label: "Medical expenses – B: Complete medical examination", cap: 1000 },
  { code: "LP4C", label: "Medical expenses – C: Vaccination medical expenses", cap: 1000 },
  { code: "LP5",  label: "Net deposit in Skim Simpanan Pendidikan Nasional (SSPN)", cap: 8000 },
  { code: "LP6",  label: "Payment of alimony to former wife", cap: null },               // ikut bukti sebenar
  { code: "LP7A", label: "Life insurance – A: Pensionable public servants", cap: 7000 }, // kombinasi life+EPF khas
  { code: "LP7B", label: "Life insurance – B: Others (life/takaful)", cap: 3000 },
  { code: "LP8",  label: "Private Retirement Scheme (PRS) & deferred annuity", cap: 3000 },
  { code: "LP9",  label: "Education & medical insurance (Self/Spouse/Child)", cap: 3000 },
  { code: "LP10", label: "Employee SOCSO/EPF (mandatory statutory, from payroll)", cap: 0 }, // auto dari payroll; paparan sahaja jika perlu
  { code: "LP11A",label: "Lifestyle – A: Books/sports/PC/smartphone/internet etc.", cap: 2500 },
  { code: "LP11B",label: "Lifestyle – B: Additional lifestyle (sports equipment/fees)", cap: 500 },
  { code: "LP11C",label: "Lifestyle – C: Purchase of electronic devices (additional)", cap: 2500 },
  { code: "LP12", label: "Breastfeeding equipment (child ≤ 2 years)", cap: 1000 },
  { code: "LP13", label: "Child care fees (taska/tabika)", cap: 3000 },
  { code: "LP14", label: "Domestic tourism expenditure", cap: 1000 },
  { code: "LP15", label: "Electric vehicle (EV) charging facilities expenditure", cap: 2500 },
  { code: "LP16", label: "Interest on housing loan (first home) – if applicable", cap: null }
];
Nota:

cap ialah had maksimum tahun semasa (jika ada). Jika null, biar sistem tidak mengunci, hanya validasi ≥0.

Jika anda sudah ada label Melayu di screenshot, jangan tukar susunan—gunakan label English di atas (supaya konsisten rentas sistem). Kita boleh tambah terjemahan kemudian jika perlu.

3) Logik Penyimpanan
Bila user pilih satu item + amount → push ke pcb39.reliefs[]:

ts
Copy
Edit
type PCBRelief = { code: string; label: string; amount: number; cap?: number };
employee.pcb39.reliefs: PCBRelief[];
Validasi cap (jika cap ada dan amount > cap) → tunjuk ralat:
“Exceeds annual cap for {label}: RM{cap}”.

Benarkan >1 item jenis sama tapi jumlah terikat cap (jumlah terkumpul ≤ cap).

4) Logik Kiraan PCB (mode = “Calculate”)
Kira “Taxable Income (monthly)”:

Taxable = (Basic + Additional taxable) − (Tax Exemptions modal) − (Sum reliefs) − (Deduction with PCB39=ON yang diklasifikasikan sebagai relief)

PCB Sementara (ikut jadual MTD) → guna spesifikasi MTD 2025.

Tolak Rebate:

PCB Akhir = max(0, PCB Sementara − Sum rebates − (Deduction with PCB39=ON yang diklasifikasikan sebagai rebate, cth: Zakat))

Pembundaran: 2 d.p.

Penting: SOCSO/EPF/EIS tidak terjejas oleh relief PCB39. Flags statutory hanya mempengaruhi wage base caruman, bukan PCB.

5) Acceptance Criteria
Dropdown “Select Relief” menunjukkan semua item di atas mengikut turutan.

Menambah relief tidak menutup modal; item dipaparkan di bawah input dan boleh dipadam.

cap berfungsi (jumlah > cap disekat).

Mode Custom membenarkan override amount manual dan tidak diubah oleh kalkulasi.

Mode Calculate mengira semula PCB apabila relief/rebate/pendapatan berubah.

6) Tambahan (kalau perlu di UI)
Tunjuk tooltip “ⓘ” pada setiap relief memaparkan ringkas syarat (optional).

Simpan/restore semua nilai bila modal dibuka semula.